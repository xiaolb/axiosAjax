/**
 * util/ajax v0.0.2
 * (c) 2019 xiekaifeng4042
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):(e=e||self).topsAjax=t(e.axios)}(this,function(u){"use strict";u=u&&u.hasOwnProperty("default")?u.default:u;var e,s=(function(e){var t=function(i){var u,e=Object.prototype,s=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function a(e,t,r,n){var o=t&&t.prototype instanceof c?t:c,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(i,a,c){var u=f;return function(e,t){if(u===h)throw new Error("Generator is already running");if(u===p){if("throw"===e)throw t;return D()}for(c.method=e,c.arg=t;;){var r=c.delegate;if(r){var n=O(r,c);if(n){if(n===y)continue;return n}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===f)throw u=p,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=h;var o=l(i,a,c);if("normal"===o.type){if(u=c.done?p:d,o.arg===y)continue;return{value:o.arg,done:c.done}}"throw"===o.type&&(u=p,c.method="throw",c.arg=o.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}i.wrap=a;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",y={};function c(){}function v(){}function m(){}var b={};b[o]=function(){return this};var g=Object.getPrototypeOf,w=g&&g(g(N([])));w&&w!==e&&s.call(w,o)&&(b=w);var x=m.prototype=c.prototype=Object.create(b);function j(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function k(u){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,o){var i=l(u[e],u,r);if("throw"!==i.type){var a=i.arg,c=a.value;return c&&"object"==typeof c&&s.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):Promise.resolve(c).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,o)})}o(i.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function O(e,t){var r=e.iterator[t.method];if(r===u){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=u,O(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,y;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=u),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e};return n.next=n}}return{next:D}}function D(){return{value:u,done:!0}}return v.prototype=x.constructor=m,m.constructor=v,m[n]=v.displayName="GeneratorFunction",i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(x),e},i.awrap=function(e){return{__await:e}},j(k.prototype),k.prototype[r]=function(){return this},i.AsyncIterator=k,i.async=function(e,t,r,n){var o=new k(a(e,t,r,n));return i.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},j(x),x[n]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},i.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=N,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),c=s.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),y}},i}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(e={exports:{}},e.exports),e.exports);function l(i,a,c,u){return new(c=c||Promise)(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new c(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})}function t(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}function g(e,t){o.apply(e,j(t)?t:[t])}function w(e,t,r,n,o,i,a,c,u,s,l,f,d){var h=e;if("function"==typeof a?h=a(t,h):h instanceof Date?h=s(h):"comma"===r&&j(h)&&(h=h.join(",")),null===h){if(n)return i&&!f?i(t,k.encoder,d):t;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||x.isBuffer(h))return i?[l(f?t:i(t,k.encoder,d))+"="+l(i(h,k.encoder,d))]:[l(t)+"="+l(String(h))];var p,y=[];if(void 0===h)return y;if(j(a))p=a;else{var v=Object.keys(h);p=c?v.sort(c):v}for(var m=0;m<p.length;++m){var b=p[m];o&&null===h[b]||(j(h)?g(y,w(h[b],"function"==typeof r?r(t,b):t,r,n,o,i,a,c,u,s,l,f,d)):g(y,w(h[b],t+(u?"."+b:"["+b+"]"),r,n,o,i,a,c,u,s,l,f,d)))}return y}var c=Object.prototype.hasOwnProperty,f=Array.isArray,d=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),x={arrayToObject:t,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var u=a[c],s=i[u];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(t.push({obj:i,prop:u}),r.push(s))}return function(e){for(;1<e.length;){var t=e.pop(),r=t.obj[t.prop];if(f(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n="string"==typeof e?e:String(e);if("iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",i=0;i<n.length;++i){var a=n.charCodeAt(i);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?o+=n.charAt(i):a<128?o+=d[a]:a<2048?o+=d[192|a>>6]+d[128|63&a]:a<55296||57344<=a?o+=d[224|a>>12]+d[128|a>>6&63]+d[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(i)),o+=d[240|a>>18]+d[128|a>>12&63]+d[128|a>>6&63]+d[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function n(o,i,a){if(!i)return o;if("object"!=typeof i){if(f(o))o.push(i);else{if(!o||"object"!=typeof o)return[o,i];(a&&(a.plainObjects||a.allowPrototypes)||!c.call(Object.prototype,i))&&(o[i]=!0)}return o}if(!o||"object"!=typeof o)return[o].concat(i);var e=o;return f(o)&&!f(i)&&(e=t(o,a)),f(o)&&f(i)?(i.forEach(function(e,t){if(c.call(o,t)){var r=o[t];r&&"object"==typeof r&&e&&"object"==typeof e?o[t]=n(r,e,a):o.push(e)}else o[t]=e}),o):Object.keys(i).reduce(function(e,t){var r=i[t];return c.call(e,t)?e[t]=n(e[t],r,a):e[t]=r,e},e)}},r=String.prototype.replace,n=/%20/g,h={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,n,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},p=Object.prototype.hasOwnProperty,y={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},j=Array.isArray,o=Array.prototype.push,i=Date.prototype.toISOString,k={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:x.encode,encodeValuesOnly:!1,formatter:h.formatters[h.default],indices:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},a=(Object.prototype.hasOwnProperty,function(e,t){var r,n=e,o=function(e){if(!e)return k;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||k.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=h.default;if(void 0!==e.format){if(!p.call(h.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=h.formatters[r],o=k.filter;return"function"!=typeof e.filter&&!j(e.filter)||(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:k.addQueryPrefix,allowDots:void 0===e.allowDots?k.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:k.charsetSentinel,delimiter:void 0===e.delimiter?k.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:k.encode,encoder:"function"==typeof e.encoder?e.encoder:k.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:k.encodeValuesOnly,filter:o,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:k.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:k.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:k.strictNullHandling}}(t);"function"==typeof o.filter?n=(0,o.filter)("",n):j(o.filter)&&(r=o.filter);var i,a=[];if("object"!=typeof n||null===n)return"";i=t&&t.arrayFormat in y?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var c=y[i];r=r||Object.keys(n),o.sort&&r.sort(o.sort);for(var u=0;u<r.length;++u){var s=r[u];o.skipNulls&&null===n[s]||g(a,w(n[s],s,c,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.formatter,o.encodeValuesOnly,o.charset))}var l=a.join(o.delimiter),f=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),0<l.length?f+l:""}),v=0;function m(e,t,r,n,o,i){return E(function(e,t){return e<<t|e>>>32-t}(E(E(t,e),E(n,i)),o),r)}function b(e,t,r,n,o,i,a){return m(t&r|~t&n,e,t,o,i,a)}function O(e,t,r,n,o,i,a){return m(t&n|r&~n,e,t,o,i,a)}function P(e,t,r,n,o,i,a){return m(t^r^n,e,t,o,i,a)}function S(e,t,r,n,o,i,a){return m(r^(t|~n),e,t,o,i,a)}function E(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}var N=function(e){return function(e){for(var t,r=v?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<e.length;o++)t=e.charCodeAt(o),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n}(function(e){return function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var c=r,u=n,s=o,l=i;r=b(r,n,o,i,e[a+0],7,-680876936),i=b(i,r,n,o,e[a+1],12,-389564586),o=b(o,i,r,n,e[a+2],17,606105819),n=b(n,o,i,r,e[a+3],22,-1044525330),r=b(r,n,o,i,e[a+4],7,-176418897),i=b(i,r,n,o,e[a+5],12,1200080426),o=b(o,i,r,n,e[a+6],17,-1473231341),n=b(n,o,i,r,e[a+7],22,-45705983),r=b(r,n,o,i,e[a+8],7,1770035416),i=b(i,r,n,o,e[a+9],12,-1958414417),o=b(o,i,r,n,e[a+10],17,-42063),n=b(n,o,i,r,e[a+11],22,-1990404162),r=b(r,n,o,i,e[a+12],7,1804603682),i=b(i,r,n,o,e[a+13],12,-40341101),o=b(o,i,r,n,e[a+14],17,-1502002290),n=b(n,o,i,r,e[a+15],22,1236535329),r=O(r,n,o,i,e[a+1],5,-165796510),i=O(i,r,n,o,e[a+6],9,-1069501632),o=O(o,i,r,n,e[a+11],14,643717713),n=O(n,o,i,r,e[a+0],20,-373897302),r=O(r,n,o,i,e[a+5],5,-701558691),i=O(i,r,n,o,e[a+10],9,38016083),o=O(o,i,r,n,e[a+15],14,-660478335),n=O(n,o,i,r,e[a+4],20,-405537848),r=O(r,n,o,i,e[a+9],5,568446438),i=O(i,r,n,o,e[a+14],9,-1019803690),o=O(o,i,r,n,e[a+3],14,-187363961),n=O(n,o,i,r,e[a+8],20,1163531501),r=O(r,n,o,i,e[a+13],5,-1444681467),i=O(i,r,n,o,e[a+2],9,-51403784),o=O(o,i,r,n,e[a+7],14,1735328473),n=O(n,o,i,r,e[a+12],20,-1926607734),r=P(r,n,o,i,e[a+5],4,-378558),i=P(i,r,n,o,e[a+8],11,-2022574463),o=P(o,i,r,n,e[a+11],16,1839030562),n=P(n,o,i,r,e[a+14],23,-35309556),r=P(r,n,o,i,e[a+1],4,-1530992060),i=P(i,r,n,o,e[a+4],11,1272893353),o=P(o,i,r,n,e[a+7],16,-155497632),n=P(n,o,i,r,e[a+10],23,-1094730640),r=P(r,n,o,i,e[a+13],4,681279174),i=P(i,r,n,o,e[a+0],11,-358537222),o=P(o,i,r,n,e[a+3],16,-722521979),n=P(n,o,i,r,e[a+6],23,76029189),r=P(r,n,o,i,e[a+9],4,-640364487),i=P(i,r,n,o,e[a+12],11,-421815835),o=P(o,i,r,n,e[a+15],16,530742520),n=P(n,o,i,r,e[a+2],23,-995338651),r=S(r,n,o,i,e[a+0],6,-198630844),i=S(i,r,n,o,e[a+7],10,1126891415),o=S(o,i,r,n,e[a+14],15,-1416354905),n=S(n,o,i,r,e[a+5],21,-57434055),r=S(r,n,o,i,e[a+12],6,1700485571),i=S(i,r,n,o,e[a+3],10,-1894986606),o=S(o,i,r,n,e[a+10],15,-1051523),n=S(n,o,i,r,e[a+1],21,-2054922799),r=S(r,n,o,i,e[a+8],6,1873313359),i=S(i,r,n,o,e[a+15],10,-30611744),o=S(o,i,r,n,e[a+6],15,-1560198380),n=S(n,o,i,r,e[a+13],21,1309151649),r=S(r,n,o,i,e[a+4],6,-145523070),i=S(i,r,n,o,e[a+11],10,-1120210379),o=S(o,i,r,n,e[a+2],15,718787259),n=S(n,o,i,r,e[a+9],21,-343485551),r=E(r,c),n=E(n,u),o=E(o,s),i=E(i,l)}return Array(r,n,o,i)}(function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}(e),8*e.length))}(function(e){var t,r,n="",o=-1;for(;++o<e.length;)t=e.charCodeAt(o),r=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),o++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}(e)))};function D(i,a,c,u){return new(c=c||Promise)(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new c(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})}function C(r,n){var o,i,a,e,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){c.label=t[1];break}if(6===t[0]&&c.label<a[1]){c.label=a[1],a=t;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(t);break}a[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(r,c)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var L=(T.prototype.createDB=function(e,t,n){if(!window.indexedDB)return new Error("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301indexDB");if(!e)return new Error("\u8bf7\u6307\u5b9aindexDB \u6570\u636e\u5e93\u540d\u79f0");if(!t)return new Error("\u8bf7\u6307\u5b9aindexDB \u8868\u540d");if(!n)return new Error("\u8bf7\u6307\u5b9aindexDB keyPath");this.dbName=e,this.storeName=t,this.keyPath=n;var o=this;return new Promise(function(t){var r;o.isPending=!0,(r=o.db&&!o.db.objectStoreNames.contains(o.storeName)?(o.version++,o.db.close(),window.indexedDB.open(e,o.version)):window.indexedDB.open(e)).onerror=function(e){o.isPending=!1,console.error(e),t()},r.onsuccess=function(){o.isPending=!1,o.db=r.result,o.version=o.db.version,t(o.db)},r.onupgradeneeded=function(e){o.isPending=!1,e&&(o.db=r.result,o.db.objectStoreNames.contains(o.storeName)||o.db.createObjectStore(o.storeName,{keyPath:n})),t(o.db)}})},T.prototype.checkdbStore=function(){return D(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return!this.db||this.db.objectStoreNames.contains(this.storeName)?[3,2]:[4,this.createDB(this.dbName,this.storeName,this.keyPath)];case 1:e.sent(),e.label=2;case 2:return[2]}})})},T.prototype.getData4DB=function(o){return D(this,void 0,void 0,function(){var n=this;return C(this,function(e){switch(e.label){case 0:return!this.db||this.isPending?[2]:[4,this.checkdbStore()];case 1:return e.sent(),[2,new Promise(function(t){var r;try{var e=n.db.transaction([n.storeName]).objectStore(n.storeName);r=e.get(o)}catch(e){console.log(e),t(null),r=null}r&&(r.onerror=function(e){console.log(e),t(null)},r.onsuccess=function(){r&&r.result?t(r.result.response):t()})})]}})})},T.prototype.addData4DB=function(u,s){return D(this,void 0,void 0,function(){var a,c=this;return C(this,function(e){switch(e.label){case 0:return!this.db||this.isPending?[2]:[4,this.checkdbStore()];case 1:return e.sent(),[4,this.getData4DB(u)];case 2:return a=e.sent(),[2,new Promise(function(e,t){var r,n,o;try{o=c.db.transaction([c.storeName],"readwrite").objectStore(c.storeName)}catch(e){t(e)}var i=((r={})[c.keyPath]=u,r);i.response=s,(n=a?o.put(i):o.add(i)).onsuccess=function(){e()},n.onerror=function(e){t(e)}})]}})})},T);function T(e,t,r){var n=this;this.version=1,this.storeName="",this.db=null,this.isPending=!1,this.dbName="",this.keyPath="";var o=this.createDB(e,t,r);o instanceof Promise&&o.then(function(e){n.db=e})}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return(R="function"==typeof Symbol&&"symbol"===B(Symbol.iterator)?function(e){return B(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":B(e)})(e)}function A(e,t){if(e===t)return!0;if("object"!=R(e)||null==e||"object"!=R(t)||null==t)return!1;if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var r in e)if("ServerTime"!==r){if(!t.hasOwnProperty(r))return!1;if(!A(e[r],t[r]))return!1}return!0}function F(t){return function(e){return{}.toString.call(e)==="[object ".concat(t,"]")}}function H(e){console.log(e)}function U(e){return N("".concat(e.method,"@").concat(e.baseURL).concat(e.url,"@ak=").concat(e.headers&&e.headers.Authorization||"","@params=").concat(e.params?JSON.stringify(e.params):"","@data=").concat(e.data?JSON.stringify(e.data):""))}var _=F("Undefined"),q=null,G={requests:{},save:function(e,t){this.requests[e]&&this.requests[e](),this.requests[e]=t},getKey:function(e){return N("".concat(e.method,"@").concat(e.baseURL).concat(e.url,"@ak=").concat(e.headers&&e.headers.Authorization||""))}},z={};return function(e){var t={showLoading:H,hideLoading:H,loginCallback:H,errorMsgHandler:H,requestConfig:{},projectName:"",beforeRequestHandler:function(t){return new Promise(function(e){e(t)})}},c=Object.assign({},t,e);q=new L("tops-ajax","pkg","requestmd5");function r(e){var t,o=0<arguments.length&&void 0!==e?e:{url:"",method:"GET",loading:!1,isHandleError:!1},r=new u.CancelToken(function(e){t=e});window&&window.indexedDB||(o.cache=void 0),o.loading&&c.showLoading(o);var n=Object.assign({},c.requestConfig,{method:"GET",url:"",data:null,params:null,headers:{"Content-Type":"application/json; charset=UTF-8"},responseType:"json",withCredentials:!0,cancelToken:r}),i=o;for(var a in i)i.hasOwnProperty(a)&&F("Undefined")(i[a])&&delete i[a];return function e(t,r){if("object"!==R(r)||"object"!==R(t))Object.assign(t,r);else for(var n in r)r.hasOwnProperty(n)&&("object"===R(r[n])&&void 0!==t[n]&&null!==t[n]?e(t[n],r[n]):(t=t||{})[n]=void 0===r[n]?t[n]:r[n])}(n,o),G.save(G.getKey(n),t),c.beforeRequestHandler(n).then(function(n){return l(this,void 0,void 0,s.mark(function e(){var t,r;return s.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(F("Undefined")(o.cache)){e.next=18;break}if(!0===o.cache)return r=U(o),e.prev=3,z[r]=void 0,e.next=7,q.getData4DB(r);e.next=18;break;case 7:t=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:if(!t||z[r])return e.abrupt("return",new Promise(function(){}));e.next=15;break;case 15:return z[r]=(new Date).getTime(),setTimeout(function(){Reflect.deleteProperty(z,r)},5e3),e.abrupt("return",Promise.resolve({data:t}));case 18:return e.abrupt("return",u(n));case 19:case"end":return e.stop()}},e,null,[[3,10]])}))},function(e){return e}).then(function(e){return function(i,a){return l(this,void 0,void 0,s.mark(function e(){var t,r,n,o;return s.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.hideLoading(a),!i.request||"blob"!==i.request.responseType){e.next=8;break}if(i.headers["content-disposition"])return e.abrupt("return",Promise.resolve(i));e.next=4;break;case 4:return(t=new FileReader).readAsText(i.data,"utf8"),t.onload=function(){return!this.result||"string"!=typeof this.result||a.isHandleError?Promise.reject(i.data||{}):this.result?c.errorMsgHandler(JSON.parse(this.result).Message):void 0},e.abrupt("return",!1);case 8:if(i){e.next=10;break}return e.abrupt("return");case 10:if(r=i.data,n=U(a),!_(r.Code)&&0!==r.Code){e.next=33;break}if(a.cache&&r.Data)try{q&&q.addData4DB(n,r)}catch(e){console.log(e)}if(!1!==a.cache){e.next=31;break}if(z[n])return e.prev=16,e.next=19,q.getData4DB(n);e.next=30;break;case 19:if((o=e.sent)&&A(r,o))return e.abrupt("return",new Promise(function(){}));e.next=22;break;case 22:r.Data&&q.addData4DB(n,r),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(16),console.log(e.t0);case 28:e.next=31;break;case 30:z[n]=(new Date).getTime();case 31:return r.Data.cache=a.cache,e.abrupt("return",Promise.resolve(r.Data));case 33:if(a.isHandleError)return e.abrupt("return",Promise.reject(i.data||{}));e.next=35;break;case 35:if(i.data&&i.data.Message)return c.hideLoading(a),e.abrupt("return",Promise.resolve(null));e.next=38;break;case 38:if(302===r.Code)return window.location.href=r.message+window.location.hash,e.abrupt("return",Promise.resolve(null));e.next=41;break;case 41:if(4002===r.Code||4e3===r.Code)return c.loginCallback&&c.loginCallback instanceof Function&&c.loginCallback(r),e.abrupt("return",Promise.resolve(null));e.next=44;break;case 44:return e.abrupt("return",Promise.reject(a.isHandleError?i.data:{}));case 45:case"end":return e.stop()}},e,null,[[16,25]])}))}(e,n)},function(e){return function(e,t){c.hideLoading(t);var r=e.response||{data:null};return"Network Error"===e.message&&(e.message="\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01",r.data||(r.data={}),r.data.Message="\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"),t.isHandleError?(c.hideLoading(t),Promise.reject(r.data||{})):r.data&&r.data.Message?(setTimeout(function(){c.hideLoading(t),c.errorMsgHandler(r.data.Message)},0),Promise.resolve(null)):e.message?(setTimeout(function(){c.hideLoading(t),c.errorMsgHandler(e.message)},0),Promise.resolve(null)):Promise.reject(t.isHandleError&&r.data||{})}(e,n)})}return{getJSON:function(e){return e.method="GET",e.params&&Object.keys(e.params).length&&(e.paramsSerializer=function(e){return a(e,{indices:!1})}),r(e)},postJSON:function(e){return e.method="POST",e.params&&Object.keys(e.params).length&&(e.paramsSerializer=function(e){return a(e,{indices:!1})}),r(e)},putJSON:function(e){return e.method="PUT",r(e)},deleteJSON:function(e){return e.method="DELETE",r(e)},downloadFile:function(e,i){return window?(e.method="POST",e.responseType="blob",e.headers={"Content-Type":"blob"},r(e).then(function(e){if(e){var t="";try{t=decodeURIComponent(e.headers["content-disposition"].split("=")[1])}catch(e){console.log(e)}var r=e instanceof Blob?e:new Blob([e.data],{type:"application/octet-stream"}),n=window.URL.createObjectURL(r);if(null!==n){var o=document.createElement("a");o.style.display="none",document.body.appendChild(o),o.href=n,o.download=i&&i.fileName?i.fileName:t,o.click(),window.URL.revokeObjectURL(n)}}})):new Error("\u6b64\u65b9\u6cd5\u4f9d\u8d56\u6d4f\u89c8\u5668\u65b9\u6cd5 window.URL.createObjectURL")},postFormData:function(e){return e.method="POST",e.data=function(e){var t=[];for(var r in e){var n=encodeURIComponent(e[r]);t.push("".concat(r,"=").concat(n))}return t.join("&")}(e.data),e.headers={"Content-Type":"application/x-www-form-urlencoded"},r(e)}}}});